<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>React App</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/css/materialize.min.css">
  </head>
  <body>
    <div id="root"></div>
     
      <H1>Address Labs</H1>
      <H3>Community Contributed Open Datasets for Australian Addresses</H3>
      <br/>
      <input type="text" id="rapidAddress" size="100" placeholder="Type in address here" />
      <div style="color:#3d475c;font-size:11px;font-weight:normal;text-align:left">Address Type Ahead lookup API above is powered by  <a href="https://harmonyrightaddress.com" target="_blank">Harmony RightAddress</a> </div>
      <div id="error"></div>
      <br />
      <input id="HRA_ID" readonly="readonly" name="HRA_ID" placeholder="ID (DPID or GNAF PID)" size="60" type="text"/> &lt;-GNAF PID<br/>
      <input type="text" readonly="readonly" size="60" id="flatNumber"/> &lt;-Subdwelling<br/>
      <input type="text" readonly="readonly" size="60" id="streetNumber"/> &lt;-Street number<br/>
      <input type="text" readonly="readonly" size="60" id="streetName"/> &lt;-Street name<br/>
      <input type="text" readonly="readonly" size="60" id="streetType"/> &lt;-Street type<br/>
      <input type="text" readonly="readonly" size="60" id="suburb"/> &lt;-Suburb<br/>
      <input type="text" readonly="readonly" size="60" id="state"/> &lt;-State<br/>
      <input type="text" readonly="readonly" size="60" id="postcode"/> &lt;-Postcode<br/>
      <input type="text" readonly="readonly" size="60" id="longitude"/> &lt;-Longitude<br/>
      <input type="text" readonly="readonly" size="60" id="latitude"/> &lt;-Latitude<br/>
      
      
      <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/themes/smoothness/jquery-ui.css" rel="stylesheet">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
      <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>
      <!-- you can download the following js from our website -->
      <script src="https://s3-ap-southeast-2.amazonaws.com/common.mastersoftgroup.com/scripts/harmony-1.6.7.min.js" type="text/javascript"></script>
      <script src="https://s3-ap-southeast-2.amazonaws.com/common.mastersoftgroup.com/scripts/harmony-ui-1.6.7.min.js" type="text/javascript"></script>
      
      <script>
        $(function() {
          // Use the environment based on the site it is on
          Harmony.useEnv("https://preview-hosted.mastersoftgroup.com");
      
          // Init the client with the demo api user name and credential
          // We have created the following user and credential which you can use on localhost
          Harmony.init("aluser", "PlzXiWxqUGxGOx5r2pScje2QieaExbV8", Harmony.AUSTRALIA);
      
          // Use the JSONP protocol
          Harmony.useProtocol(Harmony.JSONP);
      
          var opt = {
            // min 3 chars to trigger the lookup
            minLength:3,
            // skip transaction call when address selected. You need to make your own call depending on your business flow.
            skipTransaction: false,
            // define your own call back function when address selected.
            onSelect: function(event, ui) {
               console.log('GNAF PID : ' + ui.item.id);
               console.log('Address  : ' + ui.item.fullAddress);
               console.log('Subdwelling : ' + ui.item.subdwelling);
               console.log('Postcode    : ' + ui.item.postcode);
               console.log('Longitude   : ' + ui.item.attributes.Longitude);
               console.log('Latitude    : ' + ui.item.attributes.Latitude);
               $("#longitude").val(ui.item.attributes.Longitude);
               $("#latitude").val(ui.item.attributes.Latitude);
               document.getReportForm.postcode.value=ui.item.postcode;
               document.getReportForm.longitude.value=ui.item.attributes.Longitude;
               document.getReportForm.latitude.value=ui.item.attributes.Latitude;
               document.getReportForm.fullAddress.value=ui.item.fullAddress;
            }
          };
      
          // Configure the address lookup.
          // "#rapidAddress" is referring to the input address element id
          Harmony.UI.addressLookup($("#rapidAddress"), "GNAF", opt);
          Harmony.UI.addField(Harmony.ID, $("#HRA_ID"));
          Harmony.UI.addField(Harmony.SUBDWELLING, $("#flatNumber"));
          Harmony.UI.addField(Harmony.STREET_NUMBER, $("#streetNumber"));
          Harmony.UI.addField(Harmony.STREET_NAME, $("#streetName"));
          Harmony.UI.addField(Harmony.STREET_TYPE, $("#streetType"));
          Harmony.UI.addField(Harmony.POSTCODE, $("#postcode"));
          Harmony.UI.addField(Harmony.LOCALITY, $("#suburb"));
          Harmony.UI.addField(Harmony.STATE, $("#state"));
        });
      
      </script>
      
      <form name="getReportForm" method="POST" action="{{ url_for('report') }}">
          <input type="hidden" name="fullAddress">
          <input type="hidden" name="postcode">
          <input type="hidden" name="longitude">
          <input type="hidden" name="latitude">
          <input type="submit" value="Get report" name="btn_submit">
      </form>
      

  </body>
</html>
